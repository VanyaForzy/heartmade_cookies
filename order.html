<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚Äî HeartMade Cookies</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<header>
  <h1>üç™ HeartMade Cookies</h1>
  <nav>
    <a href="index.html">–ì–æ–ª–æ–≤–Ω–∞</a>
    <a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a>
    <a href="about.html">–ü—Ä–æ –Ω–∞—Å</a>
    <a href="contact.html">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
    <a href="cart.html">üõí –ö–æ—à–∏–∫</a>
    <a href="my-orders.html">üì¶ –ú–æ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</a>
    
  </nav>
</header>

<section class="order-section">
  <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>

  <div id="order-cart"></div>

  <!-- –§–û–†–ú–ê -->
  <form id="order-form" action="https://formsubmit.co/heartmadecookies4@gmail.com" method="POST">

    <input type="hidden" name="_subject" value="–ù–æ–≤–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –∑ HeartMade Cookies!">
    <input type="hidden" name="_captcha" value="false">

    <!-- –ü–û–õ–ï –ö–£–î–ò –ó–ê–ü–ò–®–ï–ú–û –ö–û–®–ò–ö -->
    <input type="hidden" name="cart_data" id="cart-data">

    <label>–Ü–º‚Äô—è:
      <input type="text" name="name" required>
    </label>

    <label>–¢–µ–ª–µ—Ñ–æ–Ω:
      <input type="tel" name="phone" placeholder="+380" required>
    </label>

    <label>–ê–¥—Ä–µ—Å–∞ (—è–∫—â–æ —Å–∞–º–æ–≤–∏–≤—ñ–∑ ‚Äî –∑–∞–ª–∏—à—Ç–µ –ø—É—Å—Ç–∏–º):
      <input type="text" name="address">
    </label>

    <button type="submit" class="btn">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
  </form>

  <p id="order-result"></p>
</section>

<footer>
  <p>¬© 2025 HeartMade Cookies | –ó –ª—é–±–æ–≤‚Äô—é –∑—Ä–æ–±–ª–µ–Ω–æ –≤–¥–æ–º–∞ üíõ</p>
</footer>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  const orderCart = document.getElementById("order-cart");
  const cartField = document.getElementById("cart-data");

  let total = 0;

  // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å–∫–ª–∞–¥—É –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
  if (cart.length === 0) {
    orderCart.innerHTML = "<p>–í–∞—à –∫–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π üò¢</p>";
  } else {

cart.forEach(item => {
  const div = document.createElement("div");
  div.classList.add("cart-item");

  // === HEARTBOX ===
  if (item.name === "HeartBox") {

    const list = item.items || item.cookies || []; // ‚Üê –ø—Ä–∞—Ü—é—î –≤ –±—É–¥—å-—è–∫–æ–º—É –≤–∏–ø–∞–¥–∫—É

    div.innerHTML = `
      <h3>HeartBox (4 —à—Ç)</h3>
      <p><strong>–°–∫–ª–∞–¥:</strong> ${list.length ? list.join(", ") : "‚Äî (–Ω–µ –≤–∏–±—Ä–∞–Ω–æ)"}</p>
      <p><strong>–¶—ñ–Ω–∞:</strong> ${item.price} –≥—Ä–Ω √ó ${item.qty}</p>
    `;
  }

  // === –ó–í–ò–ß–ê–ô–ù–Ü –ü–ï–ß–ò–í–ê ===
  else {
    div.innerHTML = `
      <h3>${item.name}</h3>
      <p>${item.price} –≥—Ä–Ω √ó ${item.qty}</p>
    `;
  }

  orderCart.appendChild(div);
  total += item.price * item.qty;
});

    orderCart.innerHTML += `<h3>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: ${total} –≥—Ä–Ω</h3>`;
  }

  // –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –¥–ª—è –ª–∏—Å—Ç–∞
  document.getElementById("order-form").addEventListener("submit", function(e) {

  e.preventDefault(); // ‚õî –ó–£–ü–ò–ù–Ø–Ñ–ú–û —Ñ–æ—Ä–º—É

  const name = document.querySelector("input[name='name']").value;
  const phone = document.querySelector("input[name='phone']").value;
  const address = document.querySelector("input[name='address']").value || "–°–∞–º–æ–≤–∏–≤—ñ–∑";

  const cart = JSON.parse(localStorage.getItem("cart")) || [];

  const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);

  //-------------------------------------------------
  // ‚úÖ –ó–∞–ø–∏—Å —É MY_ORDERS (–∫–ª—ñ—î–Ω—Ç –±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó)
  //-------------------------------------------------

  const myOrders = JSON.parse(localStorage.getItem("MY_ORDERS")) || [];

  myOrders.push({
    name: name,
    phone: phone,
    address: address,
    items: cart,
    total: total,
    date: new Date().toLocaleString()
  });

  // üî• –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
  localStorage.setItem("MY_ORDERS", JSON.stringify(myOrders));

  //-------------------------------------------------
  // ‚úÖ –§–æ—Ä–º—É—î–º–æ –¥–∞–Ω—ñ –¥–ª—è formsubmit
  //-------------------------------------------------

  const cartFormatted = cart.map(item => {
    if(item.name === "HeartBox" && Array.isArray(item.items)){
      return `HeartBox: ${item.items.join(", ")}`;
    } else {
      return `${item.name} √ó ${item.qty}`;
    }
  }).join("\n");

  document.getElementById("cart-data").value =
    cartFormatted + `\n\n–°—É–º–∞: ${total} –≥—Ä–Ω`;

  //-------------------------------------------------
  // ‚úÖ –û—á–∏—â–∞—î–º–æ –∫–æ—à–∏–∫
  //-------------------------------------------------

  localStorage.removeItem("cart");

  //-------------------------------------------------
  // ‚úÖ –ß–µ—Ä–µ–∑ 300–º—Å ‚Äî –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ —Ñ–æ—Ä–º—É —Ä–µ–∞–ª—å–Ω–æ
  //-------------------------------------------------

  setTimeout(() => {
    this.submit();
  }, 300);
});

});
</script>

</body>
</html>







