<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–£—Å—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚Äî HeartMade Cookies</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<header>
  <h1>üç™ HeartMade Cookies</h1>
  <nav>
    <a href="index.html">–ì–æ–ª–æ–≤–Ω–∞</a>
    <a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a>
    <a href="order.html">–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è</a>
    <a href="orders.html" class="active">–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</a>
  </nav>
</header>

<section class="orders-section">
  <h2>üßæ –ü–µ—Ä–µ–≥–ª—è–¥ –∑–∞–º–æ–≤–ª–µ–Ω—å</h2>

  <div id="orders-list"></div>

  <button id="clear-orders" class="clear-orders-btn">–û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
</section>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const ordersContainer = document.getElementById("orders-list");
  const orders = JSON.parse(localStorage.getItem("ALL_ORDERS")) || [];

  if (orders.length === 0) {
    ordersContainer.innerHTML = "<p>–ó–∞–º–æ–≤–ª–µ–Ω—å –ø–æ–∫–∏ –Ω–µ–º–∞—î üì≠</p>";
    return;
  }

  orders.reverse().forEach((order, index) => {

let html = `
  <div class="order-card">
    <h3>–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è #${orders.length - index}</h3>
    <p><strong>–Ü–º º—è:</strong> ${order.name}</p>
    <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${order.phone}</p>
    <p><strong>–ê–¥—Ä–µ—Å–∞:</strong> ${order.address}</p>
    <p class="order-date">–î–∞—Ç–∞: ${order.date}</p>

    <div class="order-products">
`;

    order.items.forEach(item => {

      if (item.name === "HeartBox" && Array.isArray(item.items)) {
        html += `
          <p><strong>HeartBox</strong> √ó ${item.qty}</p>
          <p>–°–∫–ª–∞–¥: ${item.items.join(", ")}</p>
        `;
      } else {
        html += `<p>${item.name} √ó ${item.qty}</p>`;
      }
    });

   html += `
    </div>
    <div class="order-total">–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: ${order.total} –≥—Ä–Ω</div>
  </div>
`;

    ordersContainer.innerHTML += html;
  });

  // –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏
  document.getElementById("clear-orders").addEventListener("click", () => {
    if(confirm("–¢–æ—á–Ω–æ –æ—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è?")) {
      localStorage.removeItem("ALL_ORDERS");
      location.reload();
    }
  });
});
</script>

</body>
</html>
